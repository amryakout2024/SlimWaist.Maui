<?xml version="1.0" encoding="utf-8" ?>
<ur:UraniumContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:ur="http://schemas.enisn-projects.io/dotnet/maui/uraniumui"
             xmlns:validation="clr-namespace:InputKit.Shared.Validations;assembly=InputKit.Maui"
             xmlns:input="clr-namespace:InputKit.Shared.Controls;assembly=InputKit.Maui"
             xmlns:helpers="clr-namespace:SlimWaist.Helpers"
             xmlns:skia="clr-namespace:SkiaSharp.Extended.UI.Controls;assembly=SkiaSharp.Extended.UI"
             xmlns:micro="clr-namespace:Microcharts.Maui;assembly=Microcharts.Maui"
             xmlns:mat="http://schemas.enisn-projects.io/dotnet/maui/uraniumui/material"
             xmlns:m="clr-namespace:SlimWaist.Models"
             xmlns:extention="clr-namespace:SlimWaist.Extentions"        
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             x:Class="SlimWaist.Views.HomePage"
             Shell.NavBarIsVisible="False"
             x:Name="this" 
             Shell.TabBarIsVisible="{Binding IsTabbarVisible}"
             BackgroundColor="WhiteSmoke"
             FlowDirection="{extention:FlowDirectionsExtention}">
   
    <ur:UraniumContentPage.Resources>
        <Style TargetType="Label" x:Key="TitleLabel">
            <Setter Property="VerticalOptions" Value="Center"/>
            <Setter Property="HorizontalOptions" Value="Center"/>
            <Setter Property="TextColor" Value="{StaticResource MainColor}"/>
            <Setter Property="FontAttributes" Value="Bold"/>
        </Style>
        <Style TargetType="Label" x:Key="ValueLabel">
            <Setter Property="VerticalOptions" Value="Center"/>
            <Setter Property="HorizontalOptions" Value="Center"/>
            <Setter Property="TextColor" Value="Black"/>
            <Setter Property="FontAttributes" Value="Bold"/>
        </Style>

    </ur:UraniumContentPage.Resources>

    <ur:UraniumContentPage.Attachments>
        <mat:BottomSheetView 
            HeightRequest="200" 
            BackgroundColor="White"
            x:Name="btmSheet"
            IsPresented="{Binding IsBottomSheetPresented}">
            <mat:BottomSheetView.Style>
                <Style TargetType="mat:BottomSheetView">
                    <Style.Triggers>
                        <DataTrigger TargetType="mat:BottomSheetView" Binding="{Binding IsBottomSheetPresented}" Value="false">
                            <Setter Property="IsVisible" Value="Collapse"/>
                        </DataTrigger>
                        <DataTrigger TargetType="mat:BottomSheetView" Binding="{Binding IsBottomSheetPresented}" Value="true">
                            <Setter Property="IsVisible" Value="Visible"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </mat:BottomSheetView.Style>
            <mat:BottomSheetView.Header>
                <Label Text=""/>
            </mat:BottomSheetView.Header>
            <mat:BottomSheetView.Body>
                <VerticalStackLayout 
                    BackgroundColor="White">
                    <Grid RowDefinitions="*,*,*">
                        <Label
                            Grid.Row="0"
                            HorizontalOptions="Center"
                            FontSize="14"
                            FontAttributes="Bold"
                            Text="Targeted weight"/>
                        <Label
                            Grid.Row="1"
                            HorizontalOptions="Center"
                            FontSize="14"
                            Margin="20"
                            FontAttributes="Bold"
                            Text="100"/>
                        <Slider 
                            Grid.Row="2"
                            Value="100"
                            Minimum="0" Maximum="200"/>
                    </Grid>
                </VerticalStackLayout>
            </mat:BottomSheetView.Body>
        </mat:BottomSheetView>
    </ur:UraniumContentPage.Attachments>
    <ScrollView
        HorizontalScrollBarVisibility="Never"
        VerticalScrollBarVisibility="Never">
        <VerticalStackLayout 
            Margin="5"
            Spacing="5">
            
            <!--label for name-->
            <HorizontalStackLayout Grid.Row="0">
                <Label 
                Grid.Column="1"
                Margin="0,0,5,0"
                VerticalOptions="Center"
                Text="{extention:TranslateExtention Key=Welcomeback}"
                FontSize="20"
                TextColor="DarkSlateBlue">
                </Label>
                <Label 
                Grid.Column="1"
                Margin="0,0,5,0"
                VerticalOptions="Center"
                Text="{Binding Name}"
                FontSize="23"
                TextColor="DarkSlateBlue">
                </Label>
            </HorizontalStackLayout>

            <!--label above body analysis-->
            <Grid Grid.Row="1">
                <Label 
                Text="{extention:TranslateExtention Key=Bodymassanalysis}"
                VerticalOptions="Center" 
                HorizontalOptions="Start" />
                <Label 
                Text="{extention:TranslateExtention Key=Edit}"
                TextColor="SteelBlue"
                VerticalOptions="Center" 
                HorizontalOptions="End">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding GoProfilePageCommand}"/>
                    </Label.GestureRecognizers>
                </Label>

            </Grid>

            <!--body analysis form-->
            <VerticalStackLayout
                Grid.Row="2"
                Spacing="5">
                <Border
                    HeightRequest="50"
                    BackgroundColor="White"
                    Padding="5"
                    Stroke="LightGray"
                    StrokeThickness="0.4"
                    StrokeShape="RoundRectangle 10">
                    <Grid ColumnDefinitions="*,auto">
                        <HorizontalStackLayout
                            Grid.Column="0">
                            <Label 
                            Text="{extention:TranslateExtention Key=Weight}"
                            Style="{StaticResource Key=TitleLabel}"/>
                            <Label 
                            Text=" : "
                            Style="{StaticResource Key=TitleLabel}"/>
                            <Label 
                            Text="{Binding Weight}"
                            Style="{StaticResource Key=ValueLabel}"/>
                        </HorizontalStackLayout>
                        <Image 
                            Grid.Column="1"
                            WidthRequest="100"
                            Source="scale2.png">
                            <Image.Behaviors>
                                <toolkit:IconTintColorBehavior TintColor="{StaticResource MainColor}"/>
                            </Image.Behaviors>
                        </Image>
                    </Grid>
                </Border>
                
                <Border
                    HeightRequest="50"
                    BackgroundColor="White"
                    Padding="5"
                    Stroke="LightGray"
                    StrokeThickness="0.4"
                    StrokeShape="RoundRectangle 10">
                    <Grid ColumnDefinitions="*,auto">
                        <HorizontalStackLayout
                            Grid.Column="0">
                            <Label 
                            Text="{extention:TranslateExtention Key=Idealweight}"
                            Style="{StaticResource Key=TitleLabel}"/>
                            <Label 
                            Text=" : "
                            Style="{StaticResource Key=TitleLabel}"/>
                            <Label 
                            Text="{Binding IdealWeight}"
                            Style="{StaticResource Key=ValueLabel}"/>
                        </HorizontalStackLayout>
                        <Image 
                            Grid.Column="1"
                            WidthRequest="100"
                            Source="pass.png">
                            <Image.Behaviors>
                                <toolkit:IconTintColorBehavior TintColor="{StaticResource MainColor}"/>
                            </Image.Behaviors>
                        </Image>
                    </Grid>
                </Border>
                
                <Border
                    HeightRequest="50"
                    BackgroundColor="White"
                    Padding="5"
                    Stroke="LightGray"
                    StrokeThickness="0.4"
                    StrokeShape="RoundRectangle 10">
                    <Grid ColumnDefinitions="*,auto">
                        <HorizontalStackLayout
                            Grid.Column="0">
                            <Label 
                            Text="{extention:TranslateExtention Key=Targetedweight}"
                            Style="{StaticResource Key=TitleLabel}"/>
                            <Label 
                            Text=" : "
                            Style="{StaticResource Key=TitleLabel}"/>
                            <Label 
                            Text="{Binding TargetedWeight}"
                            Style="{StaticResource Key=ValueLabel}"/>
                        </HorizontalStackLayout>
                        <Label Grid.Column="1"
                               WidthRequest="60"
                               VerticalOptions="Center"
                               HorizontalOptions="Center"
                Text="{extention:TranslateExtention Key=Edit}"
                TextColor="{StaticResource MainColor}">
                            <Label.GestureRecognizers>
                                <TapGestureRecognizer Command="{Binding ShowBottomSheetCommand}"/>
                            </Label.GestureRecognizers>
                        </Label>
                    </Grid>
                </Border>
                
                <Border
                    HeightRequest="50"
                    BackgroundColor="White"
                    Padding="5"
                    Stroke="LightGray"
                    StrokeThickness="0.4"
                    StrokeShape="RoundRectangle 10">
                    <Grid ColumnDefinitions="*,auto">
                        <HorizontalStackLayout
                            Grid.Column="0">
                            <Label 
                            Text="{extention:TranslateExtention Key=Height}"
                            Style="{StaticResource Key=TitleLabel}"/>
                            <Label 
                            Text=" : "
                            Style="{StaticResource Key=TitleLabel}"/>
                            <Label 
                            Text="{Binding Height}"
                            Style="{StaticResource Key=ValueLabel}"/>
                        </HorizontalStackLayout>
                        <Image 
                            Grid.Column="1"
                            WidthRequest="100"
                            Source="height.png">
                            <Image.Behaviors>
                                <toolkit:IconTintColorBehavior TintColor="{StaticResource MainColor}"/>
                            </Image.Behaviors>
                        </Image>
                    </Grid>
                </Border>
                
                <Border
                    HeightRequest="50"
                    BackgroundColor="White"
                    Padding="5"
                    Stroke="LightGray"
                    StrokeThickness="0.4"
                    StrokeShape="RoundRectangle 10">
                    <Grid ColumnDefinitions="*,auto">
                        <HorizontalStackLayout>
                            <Label 
                            Text="{extention:TranslateExtention Key=Bodyactivity}"
                            Style="{StaticResource Key=TitleLabel}"/>
                            <Label 
                            Text=" : "
                            Style="{StaticResource Key=TitleLabel}"/>
                            <Label 
                            Text="{Binding BodyActivity}"
                            Style="{StaticResource Key=ValueLabel}"/>
                        </HorizontalStackLayout>
                        <Image 
                            Grid.Column="1"
                            WidthRequest="100"
                            Source="bodyactivity.png">
                            <Image.Behaviors>
                                <toolkit:IconTintColorBehavior TintColor="{StaticResource MainColor}"/>
                            </Image.Behaviors>
                        </Image>
                    </Grid>
                </Border>
                
                <Border
                    HeightRequest="50"
                    BackgroundColor="White"
                    Padding="5"
                    Stroke="LightGray"
                    StrokeThickness="0.4"
                    StrokeShape="RoundRectangle 10">
                    <Grid ColumnDefinitions="*,auto">
                        <HorizontalStackLayout>
                            <Label 
                            Text="{extention:TranslateExtention Key=Totalenergy}"
                            Style="{StaticResource Key=TitleLabel}"/>
                            <Label 
                            Text=" : "
                            Style="{StaticResource Key=TitleLabel}"/>
                            <Label 
                            Text="{Binding TotalEnergy}"
                            Style="{StaticResource Key=ValueLabel}"/>
                        </HorizontalStackLayout>
                        <Image 
                            Grid.Column="1"
                            WidthRequest="100"
                            Source="totalenergy.png">
                            <Image.Behaviors>
                                <toolkit:IconTintColorBehavior TintColor="{StaticResource MainColor}"/>
                            </Image.Behaviors>
                        </Image>
                    </Grid>
                </Border>

                <Border 
                    BackgroundColor="White"
                    Padding="5"
                    Stroke="LightGray"
                    StrokeThickness="0.4"
                    StrokeShape="RoundRectangle 10">
                    <VerticalStackLayout
                    Spacing="3"
                    Padding="5">
                        <Grid
                            ColumnDefinitions="*,auto">
                            <Grid RowDefinitions="*,*">
                                <HorizontalStackLayout
                                Grid.Row="0">
                                    <Label 
                            Text="{extention:TranslateExtention Key=Bodymassindex}"
                            Style="{StaticResource Key=TitleLabel}"/>
                                    <Label 
                            Text=" : "
                            Style="{StaticResource Key=TitleLabel}"/>
                                    <Label 
                            Text="{Binding BMI}"
                            Style="{StaticResource Key=ValueLabel}"/>
                                </HorizontalStackLayout>
                                <Label 
                                    Scale="0"
                            x:Name="obesityDegreeNameLabel"
                            Grid.Row="1"
                            Style="{StaticResource Key=ValueLabel}"/>
                            </Grid>
                            <VerticalStackLayout
                                WidthRequest="100"
                                Grid.Column="1">
                                <VerticalStackLayout.Resources>
                                    <Style TargetType="Border">
                                        <Setter Property="WidthRequest" Value="15"/>
                                        <Setter Property="HeightRequest" Value="20"/>
                                        <Setter Property="Margin" Value="1"/>
                                    </Style>
                                </VerticalStackLayout.Resources>
                                <Border                                
                                x:Name="bmi5"
                                BackgroundColor="Red"/>
                                <Border                                
                                x:Name="bmi4"
                                BackgroundColor="OrangeRed"/>
                                <Border                                 
                                x:Name="bmi3"
                                BackgroundColor="DarkOrange"/>
                                <Border                                
                                x:Name="bmi2"
                                BackgroundColor="Orange"/>
                                <Border
                                x:Name="bmi1"
                                BackgroundColor="Green"/>

                            </VerticalStackLayout>

                            <!--<Grid
                                Grid.Column="1">
                                <Grid
                                    ColumnDefinitions="auto,auto">
                                    <ProgressBar 
                                        Grid.Column="0"
                                        Rotation="270"
                                        BackgroundColor="Transparent"
                                        ZIndex="1"
                                        Progress="0.8"
                                        x:Name="bmiProgressBar"/>
                                </Grid>
                            </Grid>-->
                        </Grid>
                    </VerticalStackLayout>
                </Border>


                <!--<Border 
                    BackgroundColor="White"
                    Padding="5"
                    Stroke="LightGray"
                    StrokeThickness="0.4"
                    StrokeShape="RoundRectangle 10">
                    <Grid HeightRequest="100">
                        <micro:ChartView 
                            Rotation="270"
                            Chart="{Binding Chart}"
                            x:Name="chartView"
                            HeightRequest="250"
                            WidthRequest="100"
                                            />                    </Grid>
                </Border>-->

                <!--<Border 
                    BackgroundColor="White"
                    Padding="5"
                    Stroke="LightGray"
                    StrokeThickness="0.4"
                    StrokeShape="RoundRectangle 10">
                    <VerticalStackLayout
                    Spacing="3"
                    Padding="5">
                        <HorizontalStackLayout>
                            <Label 
                            Text="{extention:TranslateExtention Key=Waistcircumference}"
                            Style="{StaticResource Key=TitleLabel}"/>
                            <Label 
                            Text=" : "
                            Style="{StaticResource Key=TitleLabel}"/>
                            <Label 
                            Text="{Binding WaistCircumferenceMeasurement}"
                            Style="{StaticResource Key=ValueLabel}"/>
                        </HorizontalStackLayout>

                        --><!--<HorizontalStackLayout>
                        <Label 
                            Text="{extention:TranslateExtention Key=Waistcircumferenceevaluation}"
                            Style="{StaticResource Key=TitleLabel}"/>
                        <Label 
                            Text=" : "
                            Style="{StaticResource Key=TitleLabel}"/>
                        <Label 
                            Text="{Binding WaistCircumferenceName}"
                            Style="{StaticResource Key=ValueLabel}"/>
                    </HorizontalStackLayout>--><!--

                        <Grid ColumnDefinitions="*,*">
                            <ProgressBar 
                            BackgroundColor="WhiteSmoke"
                            Grid.Column="0"
                            Progress="0"
                            x:Name="waistProgressBar"/>
                            <Label 
                            x:Name="WaistCircumferenceNameLabel"
                            Grid.Column="1"
                            Margin="15,0,5,0"
                            Style="{StaticResource Key=ValueLabel}"/>
                        </Grid>
                    </VerticalStackLayout>
                </Border>-->


            </VerticalStackLayout>

            <!--label above collection view-->
            <Grid Grid.Row="3">
                <Label 
                Text="{extention:TranslateExtention Key=Currentregieme}"
                FontSize="15"
                VerticalOptions="Center" 
                HorizontalOptions="Start" />
                <Label 
                Text="{extention:TranslateExtention Key=Showall}"
                FontSize="18"
                    TextColor="SteelBlue"
                VerticalOptions="Center" 
                HorizontalOptions="End">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer Command="{Binding GoToDietsPageCommand}"/>
                    </Label.GestureRecognizers>
                </Label>

            </Grid>

            <CollectionView
                HeightRequest="300"
                Grid.Row="4" ItemsSource="{Binding RegimeLists}">
                <CollectionView.ItemTemplate >
                    <DataTemplate>
                        <Border 
                        BackgroundColor="WhiteSmoke"
                        Padding="10"
                        StrokeThickness="1.5"
                        Stroke="WhiteSmoke"
                        StrokeShape="RoundRectangle 10">
                            <Grid ColumnDefinitions="*,*">
                                <VerticalStackLayout Grid.Column="0">
                                    <HorizontalStackLayout>
                                        <Label 
                                Text="نوع الدايت : "
                                 Style="{StaticResource Key=TitleLabel}"/>
                                        <Label 
                                Text="{Binding RegimeName}"
                                Style="{StaticResource Key=ValueLabel}"/>
                                    </HorizontalStackLayout>
                                    <HorizontalStackLayout>
                                        <Label 
                                Text="من : "
                                Style="{StaticResource Key=TitleLabel}"/>
                                        <Label 
                                Text="{Binding Datestart}"
                                Style="{StaticResource Key=ValueLabel}"/>
                                    </HorizontalStackLayout>
                                    <HorizontalStackLayout>
                                        <Label 
                                Text="إلي : "
                                Style="{StaticResource Key=TitleLabel}"/>
                                        <Label 
                                Text="{Binding DateEnd}"
                                Style="{StaticResource Key=ValueLabel}"/>
                                    </HorizontalStackLayout>
                                    <HorizontalStackLayout>
                                        <Label 
                                Text="عدد الأيام : "
                                Style="{StaticResource Key=TitleLabel}"/>
                                        <Label 
                                Text="10"
                                Style="{StaticResource Key=ValueLabel}"/>
                                    </HorizontalStackLayout>
                                    <HorizontalStackLayout>
                                        <Label 
                                Text="الوزن : "
                                Style="{StaticResource Key=TitleLabel}"/>
                                        <Label 
                                Text="{Binding Weight}"
                                Style="{StaticResource Key=ValueLabel}"/>
                                    </HorizontalStackLayout>
                                </VerticalStackLayout>
                                <Image Grid.Column="1"
                           Source="food2.jfif"/>
                            </Grid>
                        </Border>

                    </DataTemplate>
                </CollectionView.ItemTemplate>

                <CollectionView.EmptyView>
                    <ContentView HeightRequest="120">
                        <StackLayout HorizontalOptions="Center"
                             VerticalOptions="Center">
                            <Label Text="{extention:TranslateExtention Key=Noregiemetillnow}"
                                   Margin="0,0,0,10"
                               x:Name="NoRegiemeLabel"
                                   FontAttributes="Bold"
                                   FontSize="18"
                                   HorizontalOptions="Fill"
                                   HorizontalTextAlignment="Center" />
                            <Button Text="{extention:TranslateExtention Key=Startregieme}"
                                FontSize="20"
                                Command="{Binding GoToDietsPageCommand}"
                                BackgroundColor="{StaticResource MainColor}"
                                HorizontalOptions="Fill"/>
                        </StackLayout>
                    </ContentView>
                </CollectionView.EmptyView>
            </CollectionView>
        </VerticalStackLayout>
    </ScrollView>
</ur:UraniumContentPage>

<!--<skia:SKLottieView Source="AniRun.json" 
                               IsAnimationEnabled="True"
                               x:Name="sk"
                               ZIndex="1"
                               WidthRequest="350"
                               HeightRequest="350" 
                               RepeatMode="Restart"
                               RepeatCount="-1"/>-->
