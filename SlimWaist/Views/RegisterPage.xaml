<?xml version="1.0" encoding="utf-8" ?>
<ur:UraniumContentPage  xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:ur="http://schemas.enisn-projects.io/dotnet/maui/uraniumui"
             xmlns:extention="clr-namespace:SlimWaist.Extentions"        
             xmlns:validation="clr-namespace:InputKit.Shared.Validations;assembly=InputKit.Maui"
             xmlns:input="clr-namespace:InputKit.Shared.Controls;assembly=InputKit.Maui"
             xmlns:myValidations="clr-namespace:SlimWaist.Validations"
             xmlns:mat="http://schemas.enisn-projects.io/dotnet/maui/uraniumui/material"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             x:Class="SlimWaist.Views.RegisterPage"
             Shell.NavBarIsVisible="True"
             Shell.FlyoutBehavior="Disabled" 
             FlowDirection="{extention:FlowDirectionsExtention}">
    <ur:UraniumContentPage.Resources>
        <Style x:Key="InvalidMatTextFieldStyle" TargetType="mat:TextField">
            <Setter Property="TextColor" Value="Red" />
        </Style>
        <Style x:Key="ValidMatTextFieldStyle" TargetType="mat:TextField">
            <Setter Property="TextColor" Value="DarkSlateBlue" />
        </Style>
    </ur:UraniumContentPage.Resources>

    <Shell.TitleView>
        <Label 
            Text="{extention:TranslateExtention Key=Newmembership}"
            HorizontalOptions="Center"
            TextColor="{StaticResource MainColor}"
            HorizontalTextAlignment="Center"
            VerticalOptions="Center"
            FontSize="25"/>
    </Shell.TitleView>
    
    <ur:UraniumContentPage.Attachments>
        <mat:BottomSheetView CloseOnTapOutside="False"
            BackgroundColor="WhiteSmoke"
            x:Name="btmSheet"
            IsPresented="{Binding IsBottomSheetPresented}">

            <mat:BottomSheetView.Style>
                <Style TargetType="mat:BottomSheetView">
                    <Style.Triggers>
                        <DataTrigger TargetType="mat:BottomSheetView" Binding="{Binding IsBottomSheetPresented}" Value="false">
                            <Setter Property="IsVisible" Value="Collapse"/>
                        </DataTrigger>
                        <DataTrigger TargetType="mat:BottomSheetView" Binding="{Binding IsBottomSheetPresented}" Value="true">
                            <Setter Property="IsVisible" Value="Visible"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </mat:BottomSheetView.Style>

            <mat:BottomSheetView.Header>
                <Grid BackgroundColor="WhiteSmoke"/>
            </mat:BottomSheetView.Header>
            <mat:BottomSheetView.Body>
                <VerticalStackLayout
                    Spacing="20"
                    Padding="10">
                    <Label
                        Style="{StaticResource TitleLabel}"
                        HorizontalOptions="Center"
                        VerticalOptions="Center"
                        Text="{extention:TranslateExtention Key=EntertheconfirmationOTPthatsenttoyouremail}"
                        TextColor="DarkBlue"
                        FontSize="18"/>
                    
                    <Label
                        Style="{StaticResource TitleLabel}"
                        HorizontalOptions="Center"
                        VerticalOptions="Center"
                        Text="{Binding Email}"
                        TextColor="Blue"
                        FontSize="16"/>
                    
                    <Grid FlowDirection="LeftToRight" Padding="10,0,10,0" ColumnSpacing="5" ColumnDefinitions="*,*,*,*,*,*">
                        <Grid.Resources>
                            <Style TargetType="mat:TextField">
                                <Setter Property="HorizontalOptions" Value="Center"/>
                                <Setter Property="HorizontalTextAlignment" Value="Center"/>
                                <Setter Property="TextColor" Value="DarkSlateBlue"/>
                                <Setter Property="CornerRadius" Value="10"/>
                                <Setter Property="Keyboard" Value="Numeric"/>
                            </Style>
                        </Grid.Resources>
                        <mat:TextField 
                            Grid.Column="0"
                            AutomationId="1"
                            x:Name="txt1"
                            TextChanged="txt_TextChanged">
                        </mat:TextField>
                        <mat:TextField 
                            Grid.Column="1"
                            AutomationId="2"
                            x:Name="txt2"
                            TextChanged="txt_TextChanged">
                        </mat:TextField>
                        <mat:TextField 
                            Grid.Column="2"
                            AutomationId="3"
                            x:Name="txt3"
                            TextChanged="txt_TextChanged">
                        </mat:TextField>
                        <mat:TextField 
                            Grid.Column="3"
                            AutomationId="4"
                            x:Name="txt4"
                            TextChanged="txt_TextChanged">
                        </mat:TextField>
                        <mat:TextField 
                            Grid.Column="4" 
                            AutomationId="5"
                            x:Name="txt5"
                            TextChanged="txt_TextChanged">
                        </mat:TextField>
                        <mat:TextField 
                            Grid.Column="5"
                            AutomationId="6"
                            x:Name="txt6"
                            TextChanged="txt_TextChanged">
                        </mat:TextField>
                    </Grid>
                    
                    <Label
                        Style="{StaticResource TitleLabel}"
                        HorizontalOptions="Center"
                        VerticalOptions="Center"
                        Text="{extention:TranslateExtention Key=didnotreceviedtheOTP}"
                        TextColor="DarkBlue"
                        FontSize="16"/>
                    
                    <HorizontalStackLayout HorizontalOptions="Center" Spacing="5">
                        <Label
                        Style="{StaticResource TitleLabel}"
                            TextDecorations="Underline"
                        HorizontalOptions="Center"
                        VerticalOptions="Center"
                        Text="{extention:TranslateExtention Key=Sendagain}"
                        TextColor="DarkBlue"
                        FontSize="16"/>
                        <Label
                        Style="{StaticResource TitleLabel}"
                        HorizontalOptions="Center"
                        VerticalOptions="Center"
                        Text="{extention:TranslateExtention Key=OTPwithin}"
                        TextColor="DarkBlue"
                        FontSize="16"/>
                        <HorizontalStackLayout FlowDirection="LeftToRight">
                            <Label
                        Style="{StaticResource TitleLabel}"
                        HorizontalOptions="Center"
                        VerticalOptions="Center"
                            Text="0"
                        TextColor="DarkBlue"
                        FontSize="16"/>
                            <Label
                        Style="{StaticResource TitleLabel}"
                        HorizontalOptions="Center"
                        VerticalOptions="Center"
                            Text="2" x:Name="lblMinutes"
                        TextColor="DarkBlue"
                        FontSize="16"/>
                            <Label
                        Style="{StaticResource TitleLabel}"
                        HorizontalOptions="Center"
                        VerticalOptions="Center"
                            Text=":"
                        TextColor="DarkBlue"
                        FontSize="16"/>
                            <Label
                        Style="{StaticResource TitleLabel}"
                        HorizontalOptions="Center"
                        VerticalOptions="Center"
                            Text="0" x:Name="lblSeconds"
                        TextColor="DarkBlue"
                        FontSize="16"/>
                        </HorizontalStackLayout>
                    </HorizontalStackLayout>
                   
                    <Grid ColumnDefinitions="*,*">
                        <Button Grid.Column="0"
                            Text="{extention:TranslateExtention Key=Confirm}"
                            FontSize="20"
                            BackgroundColor="DarkSlateBlue"
                            TextColor="White"
                            Padding="0" 
                            Margin="10"
                            StyleClass="FilledButton"
                            Command="{Binding SaveNewMemberShipCommand}"/>
                        <Button Grid.Column="1"
                            Text="{extention:TranslateExtention Key=Cancel}"
                            FontSize="20"
                            BackgroundColor="DarkSlateBlue"
                            TextColor="White"
                            Padding="0" 
                            Margin="10"
                            StyleClass="FilledButton"
                            Command="{Binding HideBottomsheetCommand}"/>
                    </Grid>
                </VerticalStackLayout>
            </mat:BottomSheetView.Body>
        </mat:BottomSheetView>
    </ur:UraniumContentPage.Attachments>

    <ScrollView>
        <input:FormView 
            x:Name="fv"
            Spacing="5" 
            input:FormView.IsSubmitButton="{Binding IsFormViewReset}"
            Margin="10,5,10,0" 
            SubmitCommand="{Binding ShowBottomsheetCommand}">
            <mat:TextField 
            Text="{Binding Email}"
            Title="{extention:TranslateExtention Key=Email}"
            TitleColor="Gray"
            CornerRadius="10"
            AllowClear="True"
            AccentColor="DarkSlateBlue">
                <mat:TextField.Validations>
                    <myValidations:ValidateForEmailFormat/>
                    <validation:RegexValidation  Pattern="" Message="خطأ"/>
                </mat:TextField.Validations>
                <mat:TextField.Behaviors>
                    <toolkit:EmailValidationBehavior Flags="ValidateOnValueChanged"
                                                 InvalidStyle="{StaticResource InvalidMatTextFieldStyle }"
                                                 ValidStyle="{StaticResource ValidMatTextFieldStyle}"/>
                </mat:TextField.Behaviors>
            </mat:TextField>

            <mat:TextField 
            Text="{Binding Password}"
            Title="{extention:TranslateExtention Key=Password}"
            AllowClear="True"
            TextColor="DarkSlateBlue"
            TitleColor="Gray"
            CornerRadius="10"
            AccentColor="DarkSlateBlue">
                <mat:TextField.Validations>
                    <myValidations:ValidateForFirebasePassword/>
                    <validation:RegexValidation  Pattern="" Message="خطأ"/>
                </mat:TextField.Validations>
            </mat:TextField>

            <mat:TextField 
            Text="{Binding Name}"
            Title="{extention:TranslateExtention Key=Name}"
            AllowClear="True"
            TextColor="DarkSlateBlue"
            TitleColor="Gray"
            CornerRadius="10"
            AccentColor="DarkSlateBlue">
                <mat:TextField.Validations>
                    <myValidations:ValidateForNullOrEmpty/>
                    <validation:RegexValidation  Pattern="" Message="خطأ"/>
                </mat:TextField.Validations>
            </mat:TextField>

            <mat:TextField 
            Text="{Binding Height}"
            Title="{extention:TranslateExtention Key=Height}"
            AllowClear="True"
            Keyboard="Numeric"
            TextColor="DarkSlateBlue"
            TitleColor="Gray"
            CornerRadius="10"
            AccentColor="DarkSlateBlue">
                <mat:TextField.Validations>
                    <myValidations:ValidateForDecimalNumber/>
                    <validation:MaxValueValidation MaxValue="10000000" Message=""/>
                </mat:TextField.Validations>
            </mat:TextField>

            <mat:TextField 
            Text="{Binding WaistCircumferenceMeasurement}"
            Title="{extention:TranslateExtention Key=Waistcircumference}"
            AllowClear="True"
            Keyboard="Numeric"
            TextColor="DarkSlateBlue"
            TitleColor="Gray"
            CornerRadius="10"
            AccentColor="DarkSlateBlue">
                <mat:TextField.Validations>
                    <myValidations:ValidateForDecimalNumber/>
                    <validation:MaxValueValidation MaxValue="10000000" Message=""/>
                </mat:TextField.Validations>
            </mat:TextField>

            <mat:TextField 
            Text="{Binding Weight}"
            Title="{extention:TranslateExtention Key=Weight}"
            AllowClear="True"
            Keyboard="Numeric"
            TextColor="DarkSlateBlue"
            TitleColor="Gray"
            CornerRadius="10"
            AccentColor="DarkSlateBlue">
                <mat:TextField.Validations>
                    <myValidations:ValidateForDecimalNumber/>
                    <validation:MaxValueValidation MaxValue="10000000" Message=""/>
                </mat:TextField.Validations>
            </mat:TextField>

            <mat:DatePickerField
            Date="{Binding BirthDate}"
            Padding="0"
            Format="dd/MM/yyyy"
            Title="{extention:TranslateExtention Key=Birthdate}"
            x:Name="datePickerField"
            TextColor="DarkSlateBlue"
            TitleColor="Gray"
            MinimumDate="01/01/1930"
            AccentColor="DarkSlateBlue">
                <mat:DatePickerField.Validations>
                    <validation:RequiredValidation  Message="اختر التاريخ"/>
                    <validation:RegexValidation Pattern="01-12-2025"
                                               Message=""/>
                </mat:DatePickerField.Validations>
            </mat:DatePickerField>

            <Picker
                Title="{extention:TranslateExtention Key=SelectBodyActivity}"
                x:Name="picker"
                SelectedItem="{Binding SelectedBodyActivity}"
                ItemsSource="{Binding BodyActivities}"
                ItemDisplayBinding="{Binding BodyActivityName}"
                TextColor="DarkSlateBlue"
                TitleColor="DarkSlateBlue">
            </Picker>

            <mat:RadioButtonGroupView Orientation="Horizontal">
                <mat:RadioButton
                Text="{extention:TranslateExtention Key=Male}"
                IsChecked="{Binding IsMale}"
                StyleClass="CheckRadioButton"
                TextColor="DarkSlateBlue"/>
                <mat:RadioButton
                Text="{extention:TranslateExtention Key=Female}"
                StyleClass="CheckRadioButton"
                TextColor="DarkSlateBlue"/>

            </mat:RadioButtonGroupView>

            <Button 
            Text="{extention:TranslateExtention Key=Save}"
            FontSize="20"
            BackgroundColor="DarkSlateBlue"
            TextColor="White"
            VerticalOptions="Center"
            Padding="0" 
            input:FormView.IsSubmitButton="True"
            StyleClass="FilledButton" x:Name="btnShowBottomsheet"
                Clicked="btnShowBottomsheet_Clicked"
                Command="{Binding ShowBottomsheetCommand}"
           />

        </input:FormView >
    </ScrollView>
    
</ur:UraniumContentPage>